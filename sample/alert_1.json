{
	"id": "temperature",
	"type": "batch",
	"dbrps": [{
		"db": "weather",
		"rp": "default"
	}],
	"script": "var data = batch | query('''SELECT temperature FROM weather.\"default\".weather''').period(1m).every(30s).groupBy('location').fill(0)data |alert().id('Temperature {{ index .Tags \"location\" }}').message('Temperature alert').warn(lambda: \"temperature\" > 80).warn(lambda: \"temperature\" > 84).stateChangesOnly().log('/tmp/temperature.tick.log')",
	"status": "enabled"
}